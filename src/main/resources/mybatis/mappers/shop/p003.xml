<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="shop.p003">
	<resultMap id="shopReviewCheck" type="ShopP003ShopReviewVO">
		<result property="s_id" column="S_ID" />
		<result property="m_id" column="M_ID" />
	</resultMap>
	
	
	
	<select id="checkShopReview" resultMap="shop.p003.shopReviewCheck">
		<![CDATA[
			SELECT S_ID, M_ID
			FROM S_REVIEW
			WHERE S_ID = #{s_id}
			AND M_ID = #{m_id}
		]]>
	</select>
	
	<insert id="insertShopReview" parameterType="ShopP003ShopReviewVO">
		<![CDATA[
			INSERT INTO S_REVIEW (S_ID,M_ID,SR_CONTENT,SR_DATE,SR_SCORE,SR_PUBLIC)
			VALUES (#{s_id},#{m_id},#{sr_content},SYSDATE,#{sr_score},'1')
		]]>
	</insert>
	
	<insert id="insertShopReviewImage" parameterType="ShopP003ShopReviewImageVO">
		<![CDATA[
			INSERT INTO R_IMAGE (S_ID,M_ID,RI_IMG,RI_IDX)
			VALUES (#{s_id},#{m_id},#{ri_imgEncoder.img},#{ri_idx})
		]]>
	</insert>
	
</mapper>